<!DOCTYPE html>
<html lang="en">
<title>Acme Web</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<style>
html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif;}
.w3-sidebar {
  z-index: 3;
  width: 250px;
  top: 43px;
  bottom: 0;
  height: inherit;
}
table {
  border-collapse: collapse;
}

table, th, tr, td {
  border: 1px solid black;
  padding: 1rem;
}
</style>
<body>

<!-- Navbar -->
<div class="w3-top">
  <div class="w3-bar w3-theme w3-top w3-left-align w3-large">
    <a class="w3-bar-item w3-button w3-right w3-hide-large w3-hover-white w3-large w3-theme-l1" href="javascript:void(0)" onclick="w3_open()"><i class="fa fa-bars"></i></a>
    <a href="#" class="w3-bar-item w3-button w3-theme-l1">Acme Web</a>
  </div>
</div>


<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- Main content: shift it to the right by 250 pixels when the sidebar is visible -->
<div class="w3-main" style="margin-left:250px">

  <div class="w3-row w3-padding-64">
    <div class="w3-twothird w3-container">
      <h1 class="w3-text-teal">Acme Web</h1>
      <p>Welcome! Please select an action</p>
    </div>
  </div>
<!-- END MAIN -->
</div>
<div style="margin-left:250px; padding-left:2rem;">
	<div>
		<input class="w3-button w3-black" type="button" value="Load Products" id="Load">
		<input class="w3-button w3-black" type="button" value="List Products" id="List">
	</div>	
</div>
<div style="margin-left:250px; padding-left:2rem; padding-top:2rem; display: none" id="LoadProducts">
	<div style="padding-top:1rem;">
		<input type="input" name="CustomerId" id="CustomerId" placeholder="Customer Id"/>
	</div>
	<div style="padding-top:1rem;">	
		<select name="product" id="product" placeholder="Products">
		  <option value="">Product - select one</option>
		  <option value="domain">domain</option>
		  <option value="hosting">hosting</option>
		  <option value="email">email</option>
		  <option value="pdomain">pdomain</option>
		  <option value="edomain">edomain</option>		  
		</select>
	</div>
	<div style="padding-top:1rem;">
		<input type="input" name="Domain" id="Domain" placeholder="Domain" maxlength="100"/>
	</div>		
	<div style="padding-top:1rem;">
		<select name="duration" id="duration" placeholder="Duration">
		  <option value="">Duration - select one</option>
		  <option value="1">1</option>
		  <option value="2">2</option>
		  <option value="3">3</option>
		  <option value="4">4</option>
		  <option value="5">5</option>
		  <option value="6">6</option>
		  <option value="7">7</option>
		  <option value="8">8</option>
		  <option value="9">9</option>
		  <option value="10">10</option>
		  <option value="11">11</option>
		  <option value="12">12</option>
		</select>
		
		<input type="text" disabled id="duration-label" value=""/>
		<input type="text" hidden id="durations-label" value=""/>
		
	</div>	
	<div style="padding-top:1rem;">
		<p><input type="text" id="datepicker" placeholder="Start Date"></p>
	</div>
</div>	

<div style="margin-left:250px; padding-left:2rem;padding-top:2rem; display: none" id="LoadProductsBtn">
	<div>
		<input class="w3-button w3-blue" type="button" value="Submit" id="LoadButton">
	</div>	
</div>

<div style="margin-left:250px; padding-left:2rem; padding-top:2rem; display: none" id="ListProducts">
	<table id="list-table">
	</table>
</div>	
 
<script>
// Get the Sidebar
var mySidebar = document.getElementById("mySidebar");

// Get the DIV with overlay effect
var overlayBg = document.getElementById("myOverlay");

// Toggle between showing and hiding the sidebar, and add overlay effect
function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
    overlayBg.style.display = "none";
  } else {
    mySidebar.style.display = 'block';
    overlayBg.style.display = "block";
  }
}

// Close the sidebar with the close button
function w3_close() {
  mySidebar.style.display = "none";
  overlayBg.style.display = "none";
}
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script>
  $( function() {
    $( "#datepicker" ).datepicker();
  } );
  </script>
<script type="text/javascript">
$(document).ready(function(){

    $(document).on('click','#Load',function(){
		$("#LoadProducts").show();
		$("#LoadProductsBtn").show();
		$("#ListProducts").hide();
	});
	
	$( "#product" ).change(function() {
		if($( "#product" ).val()== "") {
			alert("Please select a Product");
		}
		else if($( "#product" ).val()== "domain") {
			$("#duration-label").val("year");
			$("#durations-label").val("year");
		}
		else if($( "#product" ).val()== "hosting") {
			$("#duration-label").val("months");
			$("#durations-label").val("year");
		}
		else if($( "#product" ).val()== "email") {
			$("#duration-label").val("months");
			$("#durations-label").val("year");
		}
		else if($( "#product" ).val()== "pdomain") {
			$("#duration-label").val("years");
			$("#durations-label").val("year");
		}
		else if($( "#product" ).val()== "edomain") {
			$("#duration-label").val("years");
			$("#durations-label").val("year");
		}
		
	});
	
	$(document).on('click','#LoadButton',function(){
		
		
			
		var date = $('#datepicker').val();
		
		if($( "#product" ).val() == "domain") {
			if($( "#Domain" ).val().indexOf('.com') == -1 && $( "#Domain" ).val().indexOf('.org') == -1) {
				alert("Invalid domain");
			}
		}
		else if($( "#CustomerId" ).val()== "") {
			alert("Please enter a Customer ID");
		}
		else if($( "#product" ).val()== "") {
			alert("Please select a Product");
		}
		else if($( "#Domain" ).val()== "") {
			alert("Please enter a Domain");
		}
		else if($( "#duration" ).val()== "") {
			alert("Please select a Duration");
		} else if(date == "") {
			alert("Please select a Date");
		} else {
		
			var Product = {
				customerId: $("#CustomerId").val(),
				productName:$("#product").val(),
				domain:$("#Domain").val(),
				duration:$("#duration").val(),
				durationType:$("#durations-label").val(),
				startDate:$("#datepicker").val()
			}

			$.ajax({
				url: 'http://localhost:8080/create',
				type: 'POST',
				dataType: 'json',
				contentType: "application/json; charset=utf-8",
				success: function (data) {
				
					alert("Product was successfully added");
		
				},
				data: JSON.stringify(Product)
			});
		}
		
	});
	
	$(document).on('click','#List',function(){
		
		$("#LoadProducts").hide();
		$("#LoadProductsBtn").hide();
		$("#list-table tr").remove();
		
		$.ajax({
				url: "http://localhost:8080/list",
				type: 'GET',
				success: function(res) {
					var trHTML = '<tr><td>Customer ID</td><td>Product</td><td>Domain</td><td>Duration</td><td>Start Date</td></tr>';
					$.each(res, function (i, item) {
					trHTML += '<tr><td>' + item.customerId + '</td><td>' + item.productName + '</td><td>' 
						+ item.domain + '</td><td>' + item.duration + ' ' + item.durationType + '</td><td>' + item.startDate + '</td></tr>';
					});
					$('#list-table').append(trHTML);
					$("#ListProducts").show();
					
				}
		});
	});

});



</script>

</body>
</html>
